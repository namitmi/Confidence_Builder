<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Confidence Builder - Imposter Syndrome Support</title>
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
        }
        .gradient-bg {
            background: linear-gradient(135deg, #faf5ff 0%, #fdf2f8 50%, #eff6ff 100%);
        }
        .card {
            backdrop-filter: blur(10px);
            background: rgba(255, 255, 255, 0.9);
        }
        .btn-primary {
            background: linear-gradient(135deg, #9333ea 0%, #ec4899 100%);
            transition: all 0.3s ease;
        }
        .btn-primary:hover {
            background: linear-gradient(135deg, #7c3aed 0%, #db2777 100%);
            transform: translateY(-1px);
            box-shadow: 0 10px 20px rgba(147, 51, 234, 0.3);
        }
        .progress-bar {
            transition: width 0.5s ease-in-out;
        }
        .notification {
            animation: slideIn 0.5s ease-out;
        }
        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        .task-card {
            transition: all 0.3s ease;
        }
        .task-card:hover {
            transform: translateY(-2px);
        }
        .completed {
            background: linear-gradient(135deg, #f0fdf4 0%, #ecfdf5 100%);
            border-color: #bbf7d0;
        }
        .form-input {
            transition: all 0.3s ease;
        }
        .form-input:focus {
            outline: none;
            border-color: #9333ea;
            box-shadow: 0 0 0 3px rgba(147, 51, 234, 0.1);
        }
        .auth-toggle {
            cursor: pointer;
            transition: color 0.3s ease;
        }
        .auth-toggle:hover {
            color: #9333ea;
        }
    </style>
</head>
<body class="gradient-bg min-h-screen">
    <!-- Decorative Background -->
    <div class="fixed inset-0 overflow-hidden pointer-events-none opacity-30">
        <svg class="absolute top-0 left-0 w-full h-full" viewBox="0 0 1000 1000">
            <defs>
                <pattern id="grid" width="50" height="50" patternUnits="userSpaceOnUse">
                    <path d="M 50 0 L 0 0 0 50" fill="none" stroke="rgba(139, 69, 193, 0.1)" stroke-width="1"/>
                </pattern>
                <linearGradient id="gradient1" x1="0%" y1="0%" x2="100%" y2="100%">
                    <stop offset="0%" style="stop-color: #a855f7; stop-opacity: 0.2" />
                    <stop offset="100%" style="stop-color: #ec4899; stop-opacity: 0.1" />
                </linearGradient>
                <linearGradient id="gradient2" x1="0%" y1="0%" x2="100%" y2="100%">
                    <stop offset="0%" style="stop-color: #3b82f6; stop-opacity: 0.2" />
                    <stop offset="100%" style="stop-color: #8b5cf6; stop-opacity: 0.1" />
                </linearGradient>
            </defs>
            <rect width="100%" height="100%" fill="url(#grid)" />
            <!-- Soft human figures -->
            <g opacity="0.1">
                <circle cx="200" cy="200" r="40" fill="url(#gradient1)" />
                <ellipse cx="200" cy="280" rx="20" ry="40" fill="url(#gradient1)" />
                <circle cx="800" cy="600" r="35" fill="url(#gradient2)" />
                <ellipse cx="800" cy="670" rx="18" ry="35" fill="url(#gradient2)" />
                <circle cx="150" cy="700" r="30" fill="url(#gradient1)" />
                <ellipse cx="150" cy="760" rx="15" ry="30" fill="url(#gradient1)" />
                <circle cx="750" cy="150" r="38" fill="url(#gradient2)" />
                <ellipse cx="750" cy="225" rx="19" ry="38" fill="url(#gradient2)" />
            </g>
        </svg>
    </div>

    <!-- Navigation -->
    <nav class="relative z-10 card shadow-sm border-b border-purple-100">
        <div class="max-w-6xl mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-3">
                    <div class="w-10 h-10 btn-primary rounded-full flex items-center justify-center">
                        <i data-lucide="heart" class="w-6 h-6 text-white"></i>
                    </div>
                    <h1 class="text-xl font-bold text-gray-800">Confidence Builder</h1>
                </div>
                
                <div id="nav-buttons" class="hidden space-x-4">
                    <button onclick="showStep('dashboard')" id="nav-dashboard" class="px-4 py-2 rounded-lg font-medium transition-colors text-purple-600 hover:bg-purple-50">
                        Dashboard
                    </button>
                    <button onclick="showStep('questionnaire')" id="nav-questionnaire" class="px-4 py-2 rounded-lg font-medium transition-colors text-purple-600 hover:bg-purple-50">
                        Retake Assessment
                    </button>
                    <button onclick="logout()" id="nav-logout" class="px-4 py-2 rounded-lg font-medium transition-colors text-red-600 hover:bg-red-50">
                        Logout
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="relative z-10 py-8">
        <!-- Welcome Screen -->
        <div id="welcome-screen" class="max-w-2xl mx-auto p-6 text-center">
            <div class="mb-8">
                <div class="w-20 h-20 btn-primary rounded-full flex items-center justify-center mx-auto mb-4">
                    <i data-lucide="heart" class="w-10 h-10 text-white"></i>
                </div>
                <h1 class="text-3xl font-bold text-gray-800 mb-4">Welcome to Your Confidence Journey</h1>
                <p class="text-lg text-gray-600 mb-6">
                    A science-based approach to understanding and overcoming imposter syndrome
                </p>
            </div>
            
            <div class="card rounded-xl p-6 shadow-sm border border-purple-100 mb-6">
                <h2 class="text-xl font-semibold text-gray-800 mb-4">What You'll Discover</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-left">
                    <div class="flex items-start space-x-3">
                        <div class="w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center flex-shrink-0">
                            <i data-lucide="target" class="w-4 h-4 text-purple-600"></i>
                        </div>
                        <div>
                            <h3 class="font-medium text-gray-800">Assessment</h3>
                            <p class="text-sm text-gray-600">Understand your unique imposter syndrome patterns</p>
                        </div>
                    </div>
                    <div class="flex items-start space-x-3">
                        <div class="w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center flex-shrink-0">
                            <i data-lucide="lightbulb" class="w-4 h-4 text-purple-600"></i>
                        </div>
                        <div>
                            <h3 class="font-medium text-gray-800">Personalized Plan</h3>
                            <p class="text-sm text-gray-600">Evidence-based interventions tailored to you</p>
                        </div>
                    </div>
                    <div class="flex items-start space-x-3">
                        <div class="w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center flex-shrink-0">
                            <i data-lucide="trophy" class="w-4 h-4 text-purple-600"></i>
                        </div>
                        <div>
                            <h3 class="font-medium text-gray-800">Daily Progress</h3>
                            <p class="text-sm text-gray-600">Track your journey with motivating rewards</p>
                        </div>
                    </div>
                    <div class="flex items-start space-x-3">
                        <div class="w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center flex-shrink-0">
                            <i data-lucide="trending-up" class="w-4 h-4 text-purple-600"></i>
                        </div>
                        <div>
                            <h3 class="font-medium text-gray-800">Growth Insights</h3>
                            <p class="text-sm text-gray-600">Visualize your confidence building over time</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <button onclick="startQuestionnaire()" class="btn-primary text-white px-8 py-3 rounded-xl font-semibold shadow-lg">
                Begin Your Assessment
            </button>
        </div>

        <!-- Questionnaire Screen -->
        <div id="questionnaire-screen" class="hidden max-w-2xl mx-auto p-6">
            <div class="mb-6">
                <div class="flex justify-between items-center mb-2">
                    <span class="text-sm font-medium text-gray-600">
                        Question <span id="current-q">1</span> of <span id="total-q">18</span>
                    </span>
                    <span class="text-sm font-medium text-purple-600">
                        <span id="progress-percent">6</span>% Complete
                    </span>
                </div>
                <div class="w-full bg-gray-200 rounded-full h-2">
                    <div id="progress-bar" class="bg-gradient-to-r from-purple-500 to-pink-500 h-2 rounded-full progress-bar" style="width: 6%"></div>
                </div>
            </div>
            
            <div class="card rounded-xl p-8 shadow-sm border border-purple-100">
                <h2 id="question-text" class="text-xl font-semibold text-gray-800 mb-6">
                    I often feel like I'm going to be 'found out' as incompetent
                </h2>
                
                <div id="answer-options" class="space-y-3">
                    <!-- Answer options will be populated by JavaScript -->
                </div>
                
                <div class="flex justify-between mt-8">
                    <button onclick="previousQuestion()" id="prev-btn" class="px-6 py-2 border border-gray-300 rounded-lg font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50" disabled>
                        Previous
                    </button>
                    <button onclick="nextQuestion()" id="next-btn" class="px-6 py-2 bg-purple-600 text-white rounded-lg font-medium hover:bg-purple-700 disabled:opacity-50" disabled>
                        Next
                    </button>
                </div>
            </div>
        </div>

        <!-- Results Screen -->
        <div id="results-screen" class="hidden max-w-2xl mx-auto p-6">
            <div class="text-center mb-8">
                <div id="severity-emoji" class="text-6xl mb-4">🌱</div>
                <h2 class="text-2xl font-bold text-gray-800 mb-4">Your Assessment Results</h2>
                
                <div id="severity-badge" class="inline-flex items-center px-6 py-3 rounded-xl border-2 bg-green-50 border-green-200 mb-6">
                    <span class="text-lg font-semibold mr-2">Severity Level:</span>
                    <span id="severity-level" class="text-xl font-bold capitalize text-green-600">Low</span>
                    <span id="severity-score" class="ml-2 text-gray-600">(25%)</span>
                </div>
            </div>
            
            <div class="card rounded-xl p-6 shadow-sm border border-purple-100 mb-6">
                <h3 class="text-lg font-semibold text-gray-800 mb-3">Understanding Your Results</h3>
                <p id="interpretation-text" class="text-gray-700 leading-relaxed">
                    You experience mild imposter syndrome symptoms that can be addressed with targeted self-help strategies.
                </p>
            </div>
            
            <div class="card rounded-xl p-6 shadow-sm border border-purple-100 mb-6">
                <h3 class="text-lg font-semibold text-gray-800 mb-3">Your Personalized Plan</h3>
                <div id="intervention-plan" class="space-y-3">
                    <!-- Intervention plans will be populated by JavaScript -->
                </div>
            </div>
            
            <!-- Sign Up Prompt -->
            <div class="card rounded-xl p-6 shadow-sm border border-purple-100 mb-6">
                <div class="text-center">
                    <div class="w-16 h-16 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full flex items-center justify-center mx-auto mb-4">
                        <i data-lucide="user-plus" class="w-8 h-8 text-white"></i>
                    </div>
                    <h3 class="text-lg font-semibold text-gray-800 mb-3">Save Your Progress & Start Your Journey</h3>
                    <p class="text-gray-600 mb-4">
                        Create a free account to access your personalized dashboard, track daily progress, and build lasting confidence.
                    </p>
                    <button onclick="showSignup()" class="btn-primary text-white px-6 py-2 rounded-lg font-semibold mr-3">
                        Create Free Account
                    </button>
                    <button onclick="showLogin()" class="px-6 py-2 border border-purple-300 text-purple-600 rounded-lg font-medium hover:bg-purple-50">
                        I Have an Account
                    </button>
                </div>
            </div>
        </div>

        <!-- Login Screen -->
        <div id="login-screen" class="hidden max-w-md mx-auto p-6">
            <div class="card rounded-xl p-8 shadow-sm border border-purple-100">
                <div class="text-center mb-6">
                    <div class="w-16 h-16 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full flex items-center justify-center mx-auto mb-4">
                        <i data-lucide="log-in" class="w-8 h-8 text-white"></i>
                    </div>
                    <h2 class="text-2xl font-bold text-gray-800">Welcome Back</h2>
                    <p class="text-gray-600">Continue your confidence journey</p>
                </div>
                
                <div class="space-y-4">
                    <div>
                        <label for="login-email" class="block text-sm font-medium text-gray-700 mb-2">Email</label>
                        <input type="email" id="login-email" class="form-input w-full px-4 py-3 border border-gray-300 rounded-lg" placeholder="your@email.com">
                    </div>
                    
                    <div>
                        <label for="login-password" class="block text-sm font-medium text-gray-700 mb-2">Password</label>
                        <input type="password" id="login-password" class="form-input w-full px-4 py-3 border border-gray-300 rounded-lg" placeholder="••••••••">
                    </div>
                    
                    <button onclick="handleLogin()" class="btn-primary text-white w-full px-4 py-3 rounded-lg font-semibold">
                        Sign In
                    </button>
                </div>
                
                <div class="text-center mt-6">
                    <p class="text-sm text-gray-600">
                        Don't have an account? 
                        <span onclick="showSignup()" class="auth-toggle text-purple-600 font-medium">Sign up here</span>
                    </p>
                    <p class="text-sm text-gray-600 mt-2">
                        <span onclick="showStep('results')" class="auth-toggle text-purple-600 font-medium">← Back to results</span>
                    </p>
                </div>
            </div>
        </div>

        <!-- Signup Screen -->
        <div id="signup-screen" class="hidden max-w-md mx-auto p-6">
            <div class="card rounded-xl p-8 shadow-sm border border-purple-100">
                <div class="text-center mb-6">
                    <div class="w-16 h-16 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full flex items-center justify-center mx-auto mb-4">
                        <i data-lucide="user-plus" class="w-8 h-8 text-white"></i>
                    </div>
                    <h2 class="text-2xl font-bold text-gray-800">Create Your Account</h2>
                    <p class="text-gray-600">Start building lasting confidence today</p>
                </div>
                
                <div class="space-y-4">
                    <div>
                        <label for="signup-name" class="block text-sm font-medium text-gray-700 mb-2">Name</label>
                        <input type="text" id="signup-name" class="form-input w-full px-4 py-3 border border-gray-300 rounded-lg" placeholder="Your name">
                    </div>
                    
                    <div>
                        <label for="signup-email" class="block text-sm font-medium text-gray-700 mb-2">Email</label>
                        <input type="email" id="signup-email" class="form-input w-full px-4 py-3 border border-gray-300 rounded-lg" placeholder="your@email.com">
                    </div>
                    
                    <div>
                        <label for="signup-password" class="block text-sm font-medium text-gray-700 mb-2">Password</label>
                        <input type="password" id="signup-password" class="form-input w-full px-4 py-3 border border-gray-300 rounded-lg" placeholder="••••••••">
                    </div>
                    
                    <div class="flex items-start space-x-2">
                        <input type="checkbox" id="terms-check" class="mt-1">
                        <label for="terms-check" class="text-sm text-gray-600">
                            I agree to the <span class="text-purple-600">Terms of Service</span> and <span class="text-purple-600">Privacy Policy</span>
                        </label>
                    </div>
                    
                    <button onclick="handleSignup()" class="btn-primary text-white w-full px-4 py-3 rounded-lg font-semibold">
                        Create Account
                    </button>
                </div>
                
                <div class="text-center mt-6">
                    <p class="text-sm text-gray-600">
                        Already have an account? 
                        <span onclick="showLogin()" class="auth-toggle text-purple-600 font-medium">Sign in here</span>
                    </p>
                    <p class="text-sm text-gray-600 mt-2">
                        <span onclick="showStep('results')" class="auth-toggle text-purple-600 font-medium">← Back to results</span>
                    </p>
                </div>
            </div>
        </div>

        <!-- Dashboard Screen -->
        <div id="dashboard-screen" class="hidden max-w-4xl mx-auto p-6">
            <!-- Welcome Message for Logged In User -->
            <div class="card rounded-xl p-4 shadow-sm border border-purple-100 mb-6">
                <div class="flex items-center justify-between">
                    <div class="flex items-center space-x-3">
                        <div class="w-12 h-12 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full flex items-center justify-center">
                            <i data-lucide="user" class="w-6 h-6 text-white"></i>
                        </div>
                        <div>
                            <h2 class="text-lg font-semibold text-gray-800">Welcome back, <span id="user-name-display">User</span>!</h2>
                            <p class="text-sm text-gray-600">Ready to continue building your confidence?</p>
                        </div>
                    </div>
                    <div class="text-right">
                        <p class="text-sm text-gray-600">Severity Level</p>
                        <p id="dashboard-severity" class="text-lg font-semibold capitalize text-green-600">Low</p>
                    </div>
                </div>
            </div>

            <!-- Stats Grid -->
            <div class="grid grid-cols-2 lg:grid-cols-4 gap-4 mb-8">
                <div class="card rounded-xl p-4 shadow-sm border border-purple-100">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-sm text-gray-600">Current Streak</p>
                            <p id="streak-count" class="text-2xl font-bold text-purple-600">0</p>
                        </div>
                        <i data-lucide="calendar" class="w-8 h-8 text-purple-400"></i>
                    </div>
                </div>
                
                <div class="card rounded-xl p-4 shadow-sm border border-purple-100">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-sm text-gray-600">Total Points</p>
                            <p id="total-points" class="text-2xl font-bold text-green-600">0</p>
                        </div>
                        <i data-lucide="star" class="w-8 h-8 text-green-400"></i>
                    </div>
                </div>
                
                <div class="card rounded-xl p-4 shadow-sm border border-purple-100">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-sm text-gray-600">Level</p>
                            <p id="user-level" class="text-2xl font-bold text-blue-600">1</p>
                        </div>
                        <i data-lucide="trophy" class="w-8 h-8 text-blue-400"></i>
                    </div>
                </div>
                
                <div class="card rounded-xl p-4 shadow-sm border border-purple-100">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-sm text-gray-600">Today</p>
                            <p id="daily-progress" class="text-2xl font-bold text-orange-600">0/3</p>
                        </div>
                        <i data-lucide="check-circle" class="w-8 h-8 text-orange-400"></i>
                    </div>
                </div>
            </div>

            <!-- Main Content Grid -->
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                <!-- Daily Interventions -->
                <div class="card rounded-xl p-6 shadow-sm border border-purple-100">
                    <h3 class="text-lg font-semibold text-gray-800 mb-4 flex items-center">
                        <i data-lucide="target" class="w-5 h-5 mr-2 text-purple-600"></i>
                        Today's Interventions
                    </h3>
                    <div id="daily-tasks" class="space-y-4">
                        <!-- Daily tasks will be populated by JavaScript -->
                    </div>
                </div>

                <!-- Progress Tracking -->
                <div class="card rounded-xl p-6 shadow-sm border border-purple-100">
                    <h3 class="text-lg font-semibold text-gray-800 mb-4 flex items-center">
                        <i data-lucide="trending-up" class="w-5 h-5 mr-2 text-purple-600"></i>
                        Your Progress
                    </h3>
                    <div class="space-y-6">
                        <div>
                            <div class="flex justify-between text-sm text-gray-600 mb-2">
                                <span>Daily Progress</span>
                                <span id="daily-progress-percent">0%</span>
                            </div>
                            <div class="w-full bg-gray-200 rounded-full h-3">
                                <div id="daily-progress-bar" class="bg-gradient-to-r from-purple-500 to-pink-500 h-3 rounded-full progress-bar" style="width: 0%"></div>
                            </div>
                        </div>
                        
                        <div>
                            <div class="flex justify-between text-sm text-gray-600 mb-2">
                                <span>Level Progress</span>
                                <span id="level-progress-text">0/100</span>
                            </div>
                            <div class="w-full bg-gray-200 rounded-full h-3">
                                <div id="level-progress-bar" class="bg-gradient-to-r from-green-500 to-blue-500 h-3 rounded-full progress-bar" style="width: 0%"></div>
                            </div>
                        </div>
                        
                        <div class="text-center p-4 bg-gray-50 rounded-lg">
                            <div id="progress-message">
                                <div class="text-2xl mb-2">💪</div>
                                <p class="text-sm text-gray-600">3 interventions remaining</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Notification -->
    <div id="notification" class="hidden fixed bottom-4 right-4 card rounded-lg shadow-lg border border-purple-200 p-4 max-w-sm z-50 notification">
        <div class="flex items-start space-x-3">
            <div class="w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center">
                <i data-lucide="smile" class="w-5 h-5 text-purple-600"></i>
            </div>
            <div>
                <h4 class="font-medium text-gray-800">Daily Reminder</h4>
                <p class="text-sm text-gray-600 mt-1">
                    You have <span id="remaining-tasks">3</span> intervention<span id="plural-s">s</span> left today!
                </p>
            </div>
            <button onclick="hideNotification()" class="text-gray-400 hover:text-gray-600">
                ×
            </button>
        </div>
    </div>

    <script>
        // App State
        let currentStep = 'welcome';
        let currentQuestionIndex = 0;
        let surveyAnswers = {};
        let userProfile = {
            severity: '',
            score: 0,
            interpretation: '',
            completedSurvey: false,
            streakCount: 0,
            totalPoints: 0,
            level: 1,
            isLoggedIn: false,
            name: '',
            email: ''
        };
        let dailyTasks = [];
        let completedTasks = [];

        // Survey Questions
        const surveyQuestions = [
            { id: 1, question: "I often feel like I'm going to be 'found out' as incompetent" },
            { id: 2, question: "I attribute my success to luck rather than my abilities" },
            { id: 3, question: "I feel anxious when receiving praise for my work" },
            { id: 4, question: "I worry that I won't be able to repeat past successes" },
            { id: 5, question: "I downplay my expertise when talking to others" },
            { id: 6, question: "I avoid applying for positions or opportunities I'm qualified for" },
            { id: 7, question: "I feel like I need to work twice as hard to prove myself" },
            { id: 8, question: "I compare myself unfavorably to my peers" },
            { id: 9, question: "I have trouble accepting compliments about my abilities" },
            { id: 10, question: "I fear that people will discover I'm not as smart as they think" },
            { id: 11, question: "I feel like I don't deserve my achievements" },
            { id: 12, question: "I worry constantly about not meeting others' expectations" },
            { id: 13, question: "I avoid speaking up in meetings or group discussions" },
            { id: 14, question: "I feel like I'm deceiving others about my true capabilities" },
            { id: 15, question: "I procrastinate on important tasks due to fear of failure" },
            { id: 16, question: "I dismiss positive feedback as people being 'too nice'" },
            { id: 17, question: "I feel like my success is temporary and will soon end" },
            { id: 18, question: "I overanalyze my mistakes and shortcomings" }
        ];

        // Intervention Plans
        const interventionPlans = {
            low: [
                { id: 1, title: "Daily Success Recognition", description: "Write down 3 specific things you accomplished today, no matter how small", icon: "heart", points: 15 },
                { id: 2, title: "Skill Inventory", description: "List 2 skills you've developed or improved recently", icon: "book", points: 12 },
                { id: 3, title: "Positive Self-Talk", description: "Replace one self-critical thought with a balanced perspective", icon: "lightbulb", points: 10 }
            ],
            medium: [
                { id: 1, title: "Evidence Collection", description: "Gather one piece of concrete evidence of your competence (email, feedback, result)", icon: "trophy", points: 25 },
                { id: 2, title: "Thought Challenge", description: "Identify and question one imposter thought using evidence", icon: "message-circle", points: 20 },
                { id: 3, title: "Mentor Connection", description: "Reach out to someone for guidance, feedback, or professional conversation", icon: "coffee", points: 30 },
                { id: 4, title: "Achievement Documentation", description: "Create a detailed record of a recent accomplishment and your role in it", icon: "award", points: 22 }
            ],
            high: [
                { id: 1, title: "Professional Support Check", description: "Journal about seeking or engaging with professional mental health support", icon: "heart", points: 35 },
                { id: 2, title: "Accomplishment Deep-Dive", description: "Spend 15 minutes reviewing and analyzing your career/academic achievements", icon: "award", points: 30 },
                { id: 3, title: "Support Network Activation", description: "Have a meaningful conversation with a trusted friend or colleague about your experiences", icon: "message-circle", points: 25 },
                { id: 4, title: "Mindfulness Practice", description: "Complete a 10-minute mindfulness meditation or breathing exercise", icon: "activity", points: 20 },
                { id: 5, title: "Future Self Visualization", description: "Write about your competent future self and set one small achievable goal", icon: "target", points: 28 }
            ]
        };

        // Authentication Functions
        function showLogin() {
            showStep('login');
        }

        function showSignup() {
            showStep('signup');
        }

        function handleLogin() {
            const email = document.getElementById('login-email').value;
            const password = document.getElementById('login-password').value;

            if (!email || !password) {
                alert('Please fill in all fields');
                return;
            }

            // Simulate login - in real app, this would connect to a backend
            // For demo purposes, we'll use the email as the name
            const name = email.split('@')[0];
            
            userProfile.isLoggedIn = true;
            userProfile.email = email;
            userProfile.name = name.charAt(0).toUpperCase() + name.slice(1);

            // Update dashboard display with user info
            document.getElementById('user-name-display').textContent = userProfile.name;
            document.getElementById('dashboard-severity').textContent = userProfile.severity;
            
            showDashboard();
        }

        function handleSignup() {
            const name = document.getElementById('signup-name').value;
            const email = document.getElementById('signup-email').value;
            const password = document.getElementById('signup-password').value;
            const termsAccepted = document.getElementById('terms-check').checked;

            if (!name || !email || !password) {
                alert('Please fill in all fields');
                return;
            }

            if (!termsAccepted) {
                alert('Please accept the terms and conditions');
                return;
            }

            // Simulate signup - in real app, this would connect to a backend
            userProfile.isLoggedIn = true;
            userProfile.name = name;
            userProfile.email = email;

            // Update dashboard display with user info
            document.getElementById('user-name-display').textContent = userProfile.name;
            document.getElementById('dashboard-severity').textContent = userProfile.severity;
            
            showDashboard();
        }

        function logout() {
            userProfile.isLoggedIn = false;
            userProfile.name = '';
            userProfile.email = '';
            userProfile.completedSurvey = false;
            
            // Reset survey data
            surveyAnswers = {};
            currentQuestionIndex = 0;
            dailyTasks = [];
            completedTasks = [];
            
            // Hide navigation
            document.getElementById('nav-buttons').classList.add('hidden');
            
            showStep('welcome');
        }

        // Utility Functions
        function showStep(step) {
            document.querySelectorAll('[id$="-screen"]').forEach(screen => {
                screen.classList.add('hidden');
            });
            document.getElementById(step + '-screen').classList.remove('hidden');
            currentStep = step;
            
            // Update navigation
            if (userProfile.completedSurvey && userProfile.isLoggedIn) {
                document.getElementById('nav-buttons').classList.remove('hidden');
            }
            
            // Update nav active state
            document.querySelectorAll('[id^="nav-"]').forEach(btn => {
                btn.classList.remove('bg-purple-600', 'text-white');
                btn.classList.add('text-purple-600', 'hover:bg-purple-50');
            });
            if (document.getElementById('nav-' + step)) {
                document.getElementById('nav-' + step).classList.remove('text-purple-600', 'hover:bg-purple-50');
                document.getElementById('nav-' + step).classList.add('bg-purple-600', 'text-white');
            }
        }

        function startQuestionnaire() {
            currentQuestionIndex = 0;
            surveyAnswers = {};
            showStep('questionnaire');
            updateQuestionDisplay();
        }

        function updateQuestionDisplay() {
            const question = surveyQuestions[currentQuestionIndex];
            const progress = ((currentQuestionIndex + 1) / surveyQuestions.length) * 100;
            
            document.getElementById('current-q').textContent = currentQuestionIndex + 1;
            document.getElementById('total-q').textContent = surveyQuestions.length;
            document.getElementById('progress-percent').textContent = Math.round(progress);
            document.getElementById('progress-bar').style.width = progress + '%';
            document.getElementById('question-text').textContent = question.question;
            
            // Create answer options
            const optionsContainer = document.getElementById('answer-options');
            optionsContainer.innerHTML = '';
            
            const options = [
                { value: 1, label: "Never true for me" },
                { value: 2, label: "Rarely true for me" },
                { value: 3, label: "Sometimes true for me" },
                { value: 4, label: "Often true for me" },
                { value: 5, label: "Always true for me" }
            ];
            
            options.forEach(option => {
                const button = document.createElement('button');
                button.className = `w-full p-4 rounded-lg border-2 text-left transition-all duration-200 ${
                    surveyAnswers[question.id] === option.value 
                        ? 'border-purple-500 bg-purple-50 text-purple-700'
                        : 'border-gray-200 hover:border-purple-300 hover:bg-purple-50'
                }`;
                button.onclick = () => selectAnswer(question.id, option.value);
                
                button.innerHTML = `
                    <div class="flex items-center space-x-3">
                        <div class="w-4 h-4 rounded-full border-2 ${
                            surveyAnswers[question.id] === option.value
                                ? 'border-purple-500 bg-purple-500'
                                : 'border-gray-300'
                        }">
                            ${surveyAnswers[question.id] === option.value ? '<div class="w-2 h-2 bg-white rounded-full m-auto"></div>' : ''}
                        </div>
                        <span class="font-medium">${option.label}</span>
                    </div>
                `;
                
                optionsContainer.appendChild(button);
            });
            
            // Update navigation buttons
            document.getElementById('prev-btn').disabled = currentQuestionIndex === 0;
            document.getElementById('next-btn').disabled = !surveyAnswers[question.id];
            
            if (currentQuestionIndex === surveyQuestions.length - 1) {
                document.getElementById('next-btn').textContent = 'Get Results';
                document.getElementById('next-btn').onclick = submitSurvey;
            } else {
                document.getElementById('next-btn').textContent = 'Next';
                document.getElementById('next-btn').onclick = nextQuestion;
            }
        }

        function selectAnswer(questionId, value) {
            surveyAnswers[questionId] = value;
            updateQuestionDisplay();
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                updateQuestionDisplay();
            }
        }

        function nextQuestion() {
            if (currentQuestionIndex < surveyQuestions.length - 1) {
                currentQuestionIndex++;
                updateQuestionDisplay();
            }
        }

        function submitSurvey() {
            const total = Object.values(surveyAnswers).reduce((sum, val) => sum + val, 0);
            const maxScore = surveyQuestions.length * 5;
            const percentage = (total / maxScore) * 100;
            
            let severity = 'low';
            let interpretation = '';
            let emoji = '🌱';
            
            if (percentage >= 65) {
                severity = 'high';
                interpretation = 'You experience significant imposter syndrome symptoms that may benefit from professional support alongside these interventions.';
                emoji = '🌳';
            } else if (percentage >= 35) {
                severity = 'medium';
                interpretation = 'You experience moderate imposter syndrome symptoms that can be effectively managed with consistent practice of evidence-based techniques.';
                emoji = '🌿';
            } else {
                severity = 'low';
                interpretation = 'You experience mild imposter syndrome symptoms that can be addressed with targeted self-help strategies.';
                emoji = '🌱';
            }
            
            userProfile = {
                ...userProfile,
                severity,
                score: Math.round(percentage),
                interpretation,
                completedSurvey: true
            };
            
            // Generate daily tasks
            const plans = interventionPlans[severity];
            dailyTasks = [...plans].sort(() => Math.random() - 0.5).slice(0, 3);
            completedTasks = [];
            
            // Update results display
            updateResultsDisplay(severity, Math.round(percentage), interpretation, emoji);
            showStep('results');
        }

        function updateResultsDisplay(severity, score, interpretation, emoji) {
            document.getElementById('severity-emoji').textContent = emoji;
            document.getElementById('severity-level').textContent = severity;
            document.getElementById('severity-score').textContent = `(${score}%)`;
            document.getElementById('interpretation-text').textContent = interpretation;
            
            // Update severity badge styling
            const badge = document.getElementById('severity-badge');
            badge.className = 'inline-flex items-center px-6 py-3 rounded-xl border-2 mb-6';
            const severityLevel = document.getElementById('severity-level');
            severityLevel.className = 'text-xl font-bold capitalize';
            
            if (severity === 'low') {
                badge.classList.add('bg-green-50', 'border-green-200');
                severityLevel.classList.add('text-green-600');
            } else if (severity === 'medium') {
                badge.classList.add('bg-yellow-50', 'border-yellow-200');
                severityLevel.classList.add('text-yellow-600');
            } else {
                badge.classList.add('bg-red-50', 'border-red-200');
                severityLevel.classList.add('text-red-600');
            }
            
            // Update intervention plan display
            const planContainer = document.getElementById('intervention-plan');
            planContainer.innerHTML = '';
            
            interventionPlans[severity].forEach(intervention => {
                const div = document.createElement('div');
                div.className = 'flex items-start space-x-3 p-3 bg-gray-50 rounded-lg';
                div.innerHTML = `
                    <i data-lucide="${intervention.icon}" class="w-5 h-5 text-purple-600 mt-0.5"></i>
                    <div>
                        <h4 class="font-medium text-gray-800">${intervention.title}</h4>
                        <p class="text-sm text-gray-600">${intervention.description}</p>
                    </div>
                `;
                planContainer.appendChild(div);
            });
            
            // Initialize icons for the new elements
            lucide.createIcons();
        }

        function showDashboard() {
            if (!userProfile.isLoggedIn) {
                alert('Please log in to access your dashboard');
                showLogin();
                return;
            }
            
            updateDashboardDisplay();
            showStep('dashboard');
            
            // Show notification after 8 seconds
            setTimeout(() => {
                if (completedTasks.length < dailyTasks.length) {
                    showNotification();
                }
            }, 8000);
        }

        function updateDashboardDisplay() {
            // Update stats
            document.getElementById('streak-count').textContent = userProfile.streakCount;
            document.getElementById('total-points').textContent = userProfile.totalPoints;
            document.getElementById('user-level').textContent = userProfile.level;
            document.getElementById('daily-progress').textContent = `${completedTasks.length}/${dailyTasks.length}`;
            
            // Update daily tasks
            const tasksContainer = document.getElementById('daily-tasks');
            tasksContainer.innerHTML = '';
            
            dailyTasks.forEach(task => {
                const isCompleted = completedTasks.includes(task.id);
                const div = document.createElement('div');
                div.className = `task-card p-4 rounded-lg border-2 transition-all duration-300 ${
                    isCompleted 
                        ? 'completed shadow-sm' 
                        : 'bg-gray-50 border-gray-200 hover:border-purple-300 hover:shadow-md'
                }`;
                
                div.innerHTML = `
                    <div class="flex items-start justify-between">
                        <div class="flex items-start space-x-3">
                            <i data-lucide="${task.icon}" class="w-5 h-5 mt-0.5 ${isCompleted ? 'text-green-600' : 'text-gray-600'}"></i>
                            <div>
                                <h4 class="font-medium text-gray-800">${task.title}</h4>
                                <p class="text-sm text-gray-600 mt-1">${task.description}</p>
                            </div>
                        </div>
                        <div class="flex items-center space-x-2 flex-shrink-0">
                            <span class="text-sm font-medium text-purple-600">+${task.points}</span>
                            <button onclick="completeTask(${task.id})" ${isCompleted ? 'disabled' : ''} 
                                class="w-8 h-8 rounded-full border-2 flex items-center justify-center transition-all duration-200 ${
                                    isCompleted 
                                        ? 'bg-green-500 border-green-500 text-white' 
                                        : 'border-gray-300 hover:border-purple-400 hover:bg-purple-50'
                                }">
                                ${isCompleted ? '<i data-lucide="check" class="w-4 h-4"></i>' : ''}
                            </button>
                        </div>
                    </div>
                `;
                
                tasksContainer.appendChild(div);
            });
            
            // Update progress bars
            const dailyProgress = (completedTasks.length / dailyTasks.length) * 100;
            const levelProgress = userProfile.totalPoints % 100;
            
            document.getElementById('daily-progress-percent').textContent = Math.round(dailyProgress) + '%';
            document.getElementById('daily-progress-bar').style.width = dailyProgress + '%';
            document.getElementById('level-progress-text').textContent = `${levelProgress}/100`;
            document.getElementById('level-progress-bar').style.width = levelProgress + '%';
            
            // Update progress message
            const messageContainer = document.getElementById('progress-message');
            if (completedTasks.length === dailyTasks.length) {
                messageContainer.innerHTML = `
                    <div class="text-2xl mb-2">🎉</div>
                    <p class="text-sm font-medium text-green-600">
                        Excellent work! You've completed all today's interventions!
                    </p>
                `;
            } else {
                const remaining = dailyTasks.length - completedTasks.length;
                messageContainer.innerHTML = `
                    <div class="text-2xl mb-2">💪</div>
                    <p class="text-sm text-gray-600">
                        ${remaining} intervention${remaining !== 1 ? 's' : ''} remaining
                    </p>
                `;
            }
            
            // Initialize icons for new elements
            lucide.createIcons();
        }

        function completeTask(taskId) {
            const task = dailyTasks.find(t => t.id === taskId);
            if (task && !completedTasks.includes(taskId)) {
                completedTasks.push(taskId);
                userProfile.totalPoints += task.points;
                userProfile.level = Math.floor(userProfile.totalPoints / 100) + 1;
                
                // Update streak if all tasks completed
                if (completedTasks.length === dailyTasks.length) {
                    userProfile.streakCount++;
                }
                
                updateDashboardDisplay();
                hideNotification();
            }
        }

        function showNotification() {
            const remaining = dailyTasks.length - completedTasks.length;
            if (remaining > 0) {
                document.getElementById('remaining-tasks').textContent = remaining;
                document.getElementById('plural-s').textContent = remaining !== 1 ? 's' : '';
                document.getElementById('notification').classList.remove('hidden');
            }
        }

        function hideNotification() {
            document.getElementById('notification').classList.add('hidden');
        }

        // Initialize the app
        document.addEventListener('DOMContentLoaded', function() {
            // Try to initialize Lucide icons, with fallback if it fails
            try {
                if (typeof lucide !== 'undefined') {
                    lucide.createIcons();
                } else {
                    console.log('Lucide not loaded, using fallback');
                }
            } catch (error) {
                console.log('Lucide initialization failed, app will work without icons');
            }
            showStep('welcome');
        });
    </script>
</body>
</html>